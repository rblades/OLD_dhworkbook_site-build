<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Shawn Graham">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Glitch - HIST3814o Crafting Digital History</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Glitch";
    var mkdocs_page_input_path = "supporting materials/glitch.md";
    var mkdocs_page_url = "/supporting materials/glitch/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> HIST3814o Crafting Digital History</a>
        <a href="#skip-nav">Skip navigation menu</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <label hidden for="search-box" aria-hidden="false">Search Documents
    </label>
    <input id="search-box" type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
  <ul class="current">
    
          
            <li class="toctree-l1">
    
    <a class="" href="../..">Home</a>
      </li>
          
            <li class="toctree-l1">
    
    <a class="" href="../../introduction/crafting-digital-history/">Getting Started</a>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">1. Open Access Research</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../module-1/Open-Access-Research/">Why you should be open</a>
                </li>
                <li class="">
                    
    <a class="" href="../../module-1/Exercises/">Exercises</a>
                </li>
    </ul>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">2. Finding Data</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../module-2/Finding Data/">How do we find data?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../module-2/Exercises/">Exercises</a>
                </li>
    </ul>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">3. Fixing Data</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../module-3/Wrangling Data/">Data is messy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../module-3/Exercises/">Exercises</a>
                </li>
    </ul>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">4. Analysis</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../module-4/Seeing Patterns/">Seeing Patterns</a>
                </li>
                <li class="">
                    
    <a class="" href="../../module-4/Exercises/">Exercises</a>
                </li>
    </ul>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">5. Visualization</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../module-5/Humanities Visualization/">Communicating your Findings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../module-5/Exercises/">Exercises (OPTIONAL)</a>
                </li>
    </ul>
      </li>
          
            <li class="toctree-l1">
    
    <a class="" href="../../conclusion/conclusion/">6. Final Thoughts</a>
      </li>
          
            <li class="toctree-l1">
    
    <span class="caption-text">Appendices</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tei/">Text Encoding Initiative</a>
                </li>
                <li class="">
                    
    <a class="" href="../git-rstudio/">Git in RStudio</a>
                </li>
                <li class="">
                    
    <a class="" href="../regex/">Introduction to Regular Expressions (regex)</a>
                </li>
                <li class="">
                    
    <a class="" href="../regexex/">Regex & the Republic of Texas</a>
                </li>
                <li class="">
                    
    <a class="" href="../open-refine/">Open Refine</a>
                </li>
                <li class="">
                    
    <a class="" href="../ner/">Stanford Named Entity Recognizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../regex-ner/">Going further with regex</a>
                </li>
                <li class="">
                    
    <a class="" href="../quick-intro-r/">Quick intro to R</a>
                </li>
                <li class="">
                    
    <a class="" href="../cyoa.txt/">Choose Your Own Adventure</a>
                </li>
                <li class="">
                    
    <a class="" href="../geoparsing-w-python.txt/">Geoparsing with Python</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Glitch</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#glitching-files">Glitching Files</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#workflow-were-going-for">Workflow we're going for:</a></li>
        
            <li><a class="toctree-l4" href="#open-context">Open Context</a></li>
        
            <li><a class="toctree-l4" href="#an-image-glitch-script-in-python">An image glitch script in Python</a></li>
        
            <li><a class="toctree-l4" href="#a-static-website-generator-for-photography">A static website generator for photography</a></li>
        
            <li><a class="toctree-l4" href="#host-the-site-on-github">Host the site on GitHub</a></li>
        
            <li><a class="toctree-l4" href="#conclusion">Conclusion</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../gephi.txt/">Social Network Analysis with Gephi</a>
                </li>
                <li class="">
                    
    <a class="" href="../multimode-networks.txt/">Multimode Networks</a>
                </li>
                <li class="">
                    
    <a class="" href="../graphing-the-net.txt/">Graphing the Net</a>
                </li>
                <li class="">
                    
    <a class="" href="../topicmodel-r-dhbox/">Topic Modeling, DH Box</a>
                </li>
                <li class="">
                    
    <a class="" href="../topicmodel-r-yourmachine/">Topic Modeling, Local</a>
                </li>
                <li class="">
                    
    <a class="" href="../netviz/">Network visualization with igraph</a>
                </li>
                <li class="">
                    
    <a class="" href="../inkscape/">Inkscape</a>
                </li>
                <li class="">
                    
    <a class="" href="../gh-pages/">GitHub Pages</a>
                </li>
                <li class="">
                    
    <a class="" href="../leaflet.txt/">Leaflet</a>
                </li>
    </ul>
      </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">HIST3814o Crafting Digital History</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Appendices &raquo;</li>
        
      
    
    <li>Glitch</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/shawngraham/dhworkbook/tree/gh-pages/edit/master/docs/supporting materials/glitch.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <a name="skip-nav" aria-label="Anchor link destination for skipping navigation"></a>
          <div role="main">
            <div class="section">
              
                <h1 id="glitching-files">Glitching Files</h1>
<p>Glitching files messes with our expectations of what digital data should be. There is actually quite a large body of literature on the why and how of glitching (try <a href="https://github.com/GlitchTools/Glitch-Arts-Resources#writings">Glitch's GitHub for a place to start</a>). For us as digital historians, glitching digital images or other documents reminds of us the ephemerality of digital data. It might also raise other questions about the composition of historical photography, and the ways that no image is an objective record of the past. </p>
<p>In the exercise below, you will do the following:</p>
<ol>
<li>Build on what you learned about APIs and regex to download images from the <a href="https://opencontext.org/">Open Context</a> repository of archaeological data.</li>
<li>Use a script that will perform the same manipulations on every image in your folder.</li>
<li>Use another script to create a static website with all of your images, a gallery of Glitch.</li>
</ol>
<p>Spend some time on the articles and resources curated on <a href="https://github.com/GlitchTools/Glitch-Arts-Resources">Glitch's GitHub</a> to begin to explore the philosophy and aesthetic of Glitch.</p>
<h2 id="workflow-were-going-for">Workflow we're going for:</h2>
<ol>
<li>Get images from Open Context (<code>ocget.sh</code>)</li>
<li>Glitch them (<code>do-glitch.sh</code>)</li>
<li>Make a website out of them (<code>expose</code>)</li>
<li>Push them to GitHub Pages (<code>git</code>)</li>
</ol>
<h2 id="open-context">Open Context</h2>
<p>Open Context publishes archaeological data on the web. Archaeology generates vast amounts of information, both through excavation and through analysis. Open Context exists to publish curated versions of this data with unique digital object identifiers so that the source data of archaeology can be re-examined and re-studied in the future. Archaeology, uniquely amongst the historical disciplines, tends to destroy its subject matter, so reproducibility and open access data are extremely important issues. At <a href="https://opencontext.org/about/services">Open Context's API page</a>, they explain how to programmatically obtain information from their site. </p>
<ol>
<li>
<p>Check out <a href="https://opencontext.org/media-search/.json?prop=rel--oc-gen-cat-object||rel--oc-gen-cat-animal-bone&amp;response=uri-meta&amp;rows=10">this example search on Open Context</a>. Open that up, give it a play right now, and see what kinds of information exist. Try to craft a search that retrieves some interesting information.</p>
<p>Once you've crafted a search that retrieves something of interest, it's time to build a script that will retrieve that information for you. Remember the exercise that queried the Canadiana API? Below I have modified that script to grab 10 records from the 'animal bone' category on Open Context. You could use that as a basis for your own search.</p>
</li>
<li>
<p>In DH Box, create a new folder with <code>mkdir</code> for this exercise, then <code>cd</code> into it. </p>
</li>
<li>
<p>Open the nano editor and paste the script below in a new file. Make sure to read the comments, because there are a few lines you have to customize. (You'll get file not found errors if you don't pay attention!) </p>
<p>The line beginning with 'sed' searches for the <code>thumbnail</code> key, and marks it off with a tilde <code>~</code>. The <code>|</code> character is called a 'pipe' and it pipes the output of the command before it into the input of the command after it. The first pipe passes the output of that first sed command to grep, which finds the lines marked with the tilde to the <code>tr</code> (trim) command, which then deletes all of the other information; the next pipe passes to a series of sed commands which then get rid of whitespace and the word thumbnail, the tilde, and any commas, leaving us with a list of direct URLs to the thumbnails.</p>
<p>The wget command grabs each thumbnail in the list in turn, waiting 2 seconds between requests, and using a limited amount of bandwidth (we're good digital citizens, remember).</p>
<pre><code>#! /bin/bash
# we already know how to ask the api for the infromation we're interested in, from studying opencontex.org' api documentation. Below we ask for a 10 records related to animal bones
curl 'https://opencontext.org/media-search/.json?prop=rel--oc-gen-cat-object||rel--oc-gen-cat-animal-bone&amp;response=uri-meta&amp;rows=10' &gt;&gt; results.txt
# the next two lines take the results.txt file that is quite messy and clean it up. I'll try to explain what they all mean. Basically, tr deletes a given character - so we delete quotation marks "\"" (the slash tells the computer not to treat the quotation mark as a computer code, but as a quotation mark itself), to erase spaces, and to find the phrase "key:" and delete it too.
sed -r 's/(.+\bthumbnail\b.+)/~\1/g' results.txt | grep '~'| tr -d "\"" | tr -d "{" | tr -d "}" | tr -s " " | sed '/^\s*$/d' | tr -d ' ' | sed 's/\bthumbnail:\b//g' | sed 's/,//g' | sed 's/~//g'&gt; thumbnailstograb.txt
# gotta grab 'em all.
# in the line below, put the full path to your images file, eg mine is home/shawngraham/oc/images. Yours might be home/yourname/oc/images
wget -i thumbnailstograb.txt -P path/to/images --limit-rate=20k -w 2
</code></pre>
</li>
<li>
<p>Save it as <code>ocget.sh</code>, then use <code>$chmod 755 ocget.sh</code> to make it executable. </p>
</li>
<li>
<p>Then <code>$ mkdir images</code> so you have a place to put the images into.</p>
</li>
</ol>
<p><strong>"Hey, images keep appearing even though I ctrl+c to stop the download,"</strong> I hear some of you say. Well, that doesn't necessarily stop anything; when you ran the command, you started a <strong>process</strong> and it might still be ticking away in the background. If this seems to be happening to you, type <code>ps ux</code> to get a list of running processes. If wget is still running in the backround, you'll see it listed in the right-most column. The first number in that row is its PIDnumber; to kill it, type <code>kill -9 PIDnumber</code> where you swap in the actual PIDnumber.</p>
<p><strong>Also</strong>, before you re-run this script, you need to delete the <code>results.txt</code> file and the <code>thumbnailstograb.txt</code> file, like so: <code>rm results.txt</code> etc. Otherwise, it'll just add your results to the end of the previous results, making your list longer and longer...</p>
<h2 id="an-image-glitch-script-in-python">An image glitch script in Python</h2>
<p>The next step is to glitch the image. </p>
<ol>
<li>
<p>Go to <a href="https://github.com/Xpktro/bndr">the bndr GitHub repository</a>. This is a Python package for mucking about the bits inside a jpg image. </p>
</li>
<li>
<p>Install it at the command line with <code>$ pip install bndr</code>.</p>
</li>
<li>
<p>Make a new folder for the output of this process: <code>mkdir out</code>.</p>
<p>Now, this code is meant to be run on one file at a time, like this: <code>$ bndrimg photo-name.jpg</code>. Typing in each file name by hand would take a very long time to glitch everything. So instead, we write a little script that we'll call <code>do-glitch.sh</code>. </p>
</li>
<li>
<p>In Nano, paste the following:</p>
<pre><code>#! /bin/bash
# do-glitch.sh
# run the glitch script on each image in the images folder
for file in images/*.jpg; do bndrimg "$file"; done
# move the glitched files to the output folder
find ./ -name '*out.png' -exec cp -prv '{}' 'out/' ';'
</code></pre>
<p>This isn't the most elegant script, but it works, and frankly, that's all that matters sometimes.</p>
</li>
<li>
<p>Change the permissions so we can run it by typing <code>$ chmod 755 do-glitch.sh</code>. This script reads each file name in the images folder, and passes them one at a time to the bndr command (you can't run it when you're <strong>inside</strong> the images folder, remember). Then, we move just the glitched images to the 'out' folder. </p>
</li>
<li>
<p>Download some of the images to your own machine using the File Manager to see your glitched art!</p>
</li>
</ol>
<h2 id="a-static-website-generator-for-photography">A static website generator for photography</h2>
<p>Finally, let's turn that folder of pictures into a website. We're going to use the Exposé site generator, which you can get from the <a href="https://github.com/Jack000/expose">Exposé GitHub repository</a>. Take a moment to read through the details of that package.</p>
<ol>
<li>
<p>Use the <code>cd</code> command to get back up to your main directory (ie. don't do this when you're in your images folder). </p>
</li>
<li>
<p>Grab the Exposé code with the following command:</p>
<pre><code>$ git clone https://github.com/Jack000/Expose.git
</code></pre>
<p>The Exposé script relies on some helpers and so on in its folder. But we would like to be able to run that command no matter which folder we're in. We tell the computer that when we type <code>expose</code> we <strong>actually</strong> mean, the version that lives in that location where we just downloaded it. That is to say, we use the <code>alias</code> command. On my machine, it looks like this: <code>alias expose=/home/shawngraham/oc/Expose/expose.sh</code> </p>
<p>On your machine, it might be in a different location. Note also that the Exposé repo is uppercase 'E', while the command is lowercase e'. <strong>Also</strong>,every time you start a session, you'll need to do this alias command or else the computer won't know what you're talking about.</p>
</li>
<li>
<p>To generate the static site, <code>cd</code> into your <code>out</code> folder that holds your glitched images. </p>
</li>
<li>
<p>At the prompt, type <code>$ expose</code>. </p>
<p>Ta da! You now have a fully functional website showing off your Glitch art.</p>
<p>You can customize it to use an alternative theme, a few bells and whistles; see the Exposé documentation. One thing that you should do is to add captions for your images. You write these as either <code>.txt</code> or .<code>md</code> files, but make sure the file name for the caption is the same as for the image <strong>and</strong> put it in the same folder as the source images! You do this <strong>before</strong> you run the expose script. So <code>beaker-pic.png</code> would have as a caption file <code>beaker-pic.txt</code> or <code>beaker-pic.md</code>. You specify where the caption goes on the image in the YAML; that is, the metadata for your caption. So, if we opened <code>beaker-pic.md</code>, it might contain the following:</p>
<pre><code>---
top: 30
left: 5
width: 30
height: 20
textcolor: #ffffff
---
# A Picture of a Beaker
Beakers were used to carry rare aromatic herbs and spices...
</code></pre>
</li>
</ol>
<p>More possibilities for sorting out the position of the text are discussed in the Exposé documentation.</p>
<h2 id="host-the-site-on-github">Host the site on GitHub</h2>
<p>You can push the code for your site to GitHub, and then use GitHub's gh-pages feature to serve it up as a live website! Exposé creates all of the code for the website inside a new folder called <code>_site</code>.</p>
<ol>
<li>Type <code>$ cd _site</code></li>
<li>Turn this folder into a git repository by typing <code>git init</code>.</li>
<li>Go to your account on GitHub.com (in another browser window). Click on the <code>+</code> at the top-right to make a new repository. Call it whatever you want, but <strong>do not</strong> initialize it with a readme.</li>
<li>Back at the command line in your <code>_site</code> folder, type <code>$ git add .</code> This stages all of the files and subfolders for a new commit.</li>
<li>Type <code>$ git commit -m "first commit"</code> to make a commit message.</li>
<li>Tell git where your remote repository is by typing <code>$ git remote add origin https://github.com/YOUR-ACCOUNT/YOUR-NEW-REPO-YOU-JUST-MADE.git</code></li>
<li>Push your materials to GitHub by typing <code>$ git push -u origin master</code>. (Git might ask for your account username and password.)</li>
<li>Once that finishes, go back to GitHub and reload the page at <code>https://github.com/YOUR-ACCOUNT/YOUR-NEW-REPO-YOU-JUST-MADE</code>. You should see your changes.</li>
<li>On the button where it says 'Branch: Master', click on the down arrow. In the box where it says faintly 'Find or create a branch', type <code>gh-pages</code>. This is a special branch which tells GitHub, 'serve this up as actual code when the user goes to the special github.io version of GitHub'.</li>
<li>Click on the gearwheel icon, to go to the settings page (You can also find it at <code>https://github.com/YOUR-ACCOUNT/YOUR-NEW-REPO-YOU-JUST-MADE/settings</code>.) </li>
<li>Scroll down to the box that says 'GitHub Pages'. </li>
<li>In the green box, it says 'you're site is published at <code>https://YOUR-ACCOUNT.github.io/YOUR-NEW-REPO-YOU-JUST-MADE</code>'. </li>
<li>Click on that link and you'll see your site! (Visit <a href="https://shawngraham.github.io/exposetest/site/">my site on gh pages</a>.)</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>I see no reason why digital history cannot bleed into art. Art is meant to provoke, to prompt reflection, discussion, and controversy. Glitching images confounds our expectation of what digital data are supposed to be, supposed to do. If you choose your pictures carefully, glitching can tell a story as profound as any essay.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../gephi.txt/" class="btn btn-neutral float-right" title="Social Network Analysis with Gephi"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../geoparsing-w-python.txt/" class="btn btn-neutral" title="Geoparsing with Python"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

The Crafting Digital History site is built with <a href="http://www.mkdocs.org">MkDocs</a> using a theme provided by <a href="https://readthedocs.org">Read the Docs</a>. All documents are available on <a href="https://github.com/shawngraham/dhworkbook/tree/gh-pages"> GitHub</a>. I thank Reclaim Hosting for their help, support, and example in getting this site up and running.
</footer>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
<script>
  $(document).ready(function(){
    // Target your .container, .wrapper, .post, etc.
    $(".section").fitVids();
  });
</script>
    
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/shawngraham/dhworkbook/tree/gh-pages" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../geoparsing-w-python.txt/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../gephi.txt/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
